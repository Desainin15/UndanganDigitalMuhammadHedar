<!DOCTYPE html>
<html lang="id" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Wedding of Hedar & Puspita</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, onSnapshot, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
    
        const firebaseConfig = {
            apiKey: "AIzaSyA1OtEOJjBlEzq4RXm1OilIgtNKN5A4hAU",
            authDomain: "undangan-muhammad-hedar.firebaseapp.com",
            projectId: "undangan-muhammad-hedar",
            storageBucket: "undangan-muhammad-hedar.firebasestorage.app",
            messagingSenderId: "824504399963",
            appId: "1:824504399963:web:f2cbfebcfdf42d127c277e",
            measurementId: "G-S98FQP8EVQ"
        };
    
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        let currentUser = null;
    
        signInAnonymously(auth).catch((error) => console.error("Firebase Auth Error:", error));
    
        onAuthStateChanged(auth, (user) => {
            currentUser = user;
            if (user) { loadWishes(); }
        });
    
        const loadWishes = () => {
            const wishesRef = collection(db, 'wishes'); 
            onSnapshot(wishesRef, (snapshot) => {
                const list = document.getElementById('wishes-list');
                if (!list) return;
                list.innerHTML = '';
                if (snapshot.empty) {
                    list.innerHTML = '<p class="text-[10px] italic opacity-50 text-center">Belum ada ucapan.</p>';
                    return;
                }
                const docs = [];
                snapshot.forEach(doc => docs.push(doc.data()));
                docs.sort((a, b) => (b.timestamp?.seconds || 0) - (a.timestamp?.seconds || 0));
                docs.forEach(data => {
                    const wishDiv = document.createElement('div');
                    wishDiv.className = "border-l-2 border-navy-deep/10 pl-4 py-1 mb-4";
                    wishDiv.innerHTML = `
                        <p class="text-[10px] font-bold text-navy-deep/40 uppercase tracking-widest mb-1">${data.name || 'Tamu'}</p>
                        <p class="text-xs italic text-navy-deep/80 leading-relaxed">"${data.message || ''}"</p>
                    `;
                    list.appendChild(wishDiv);
                });
            });
        };
    
        window.sendWish = async () => {
            const input = document.getElementById('wish-input');
            const nameInput = document.getElementById('rsvp-name');
            if (!currentUser || !input.value.trim()) return;
            try {
                await addDoc(collection(db, 'wishes'), {
                    name: nameInput.value.trim() || "Tamu Undangan",
                    message: input.value.trim(),
                    timestamp: serverTimestamp()
                });
                input.value = "";
                showToast("Ucapan terkirim!");
            } catch (e) { console.error(e); }
        };

        window.handleRSVP = async (e) => {
            e.preventDefault();
            if (!currentUser) return;
            const name = document.getElementById('rsvp-name').value;
            const guests = document.getElementById('rsvp-guests').value;
            const attend = document.querySelector('input[name="attend"]:checked').value;
            try {
                await addDoc(collection(db, 'rsvp'), { name, guests, status: attend, timestamp: serverTimestamp() });
                showToast("Konfirmasi terkirim!");
                document.getElementById('rsvp-form').reset();
            } catch (e) { console.error(e); }
        };
    </script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,400&family=Inter:wght@300;400;500&family=Alex+Brush&display=swap" rel="stylesheet">

    <style>
        :root {
            --navy-deep: #001F3F;
            --navy-light: #0A2647;
            --off-white: #FDFDFD;
            --slate-gray: #708090;
        }

        body {
            font-family: 'Inter', sans-serif;
            color: var(--navy-deep);
            background-color: var(--off-white);
            overflow-x: hidden;
        }

        .font-serif { font-family: 'Cormorant Garamond', serif; }
        .font-script { font-family: 'Alex Brush', cursive; }

        .cover-screen {
            position: fixed; inset: 0; z-index: 9999;
            background: var(--navy-deep); color: white;
            display: flex; align-items: center; justify-content: center;
            transition: all 1.5s cubic-bezier(0.77, 0, 0.175, 1);
        }

        .cover-screen.hide { transform: translateY(-100%); opacity: 0; pointer-events: none; }

        .parallax-hero {
            background-attachment: fixed;
            background-position: center;
            background-size: cover;
        }

        /* Responsive Fix for Mobile Parallax */
        @media (max-width: 768px) {
            .parallax-hero { background-attachment: scroll; }
        }

        .btn-minimal {
            border: 1px solid var(--navy-deep);
            color: var(--navy-deep);
            transition: all 0.4s ease;
        }

        .btn-minimal:hover { background-color: var(--navy-deep); color: white; }

        .glass-card {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(0, 31, 63, 0.05);
        }
    </style>
</head>
<body class="antialiased">

    <div id="cover" class="cover-screen px-6 text-center">
        <div data-aos="fade-up">
            <p class="uppercase tracking-[0.3em] md:tracking-[0.5em] text-[9px] md:text-[10px] mb-6 opacity-70">Wedding Invitation</p>
            <h1 class="text-5xl md:text-8xl font-serif mb-8">Hedar & Puspita</h1>
            <div class="w-29 h-50 md:w-32 md:h-48 mx-auto mb-8 overflow-hidden rounded-full border border-white/20 p-1">
                <img src="https://lh3.googleusercontent.com/d/1btA1WS_P0U-GSm6THHatwcmmXBrTk6LD" class="w-full h-full object-cover rounded-full" alt="Cover">
            </div>
            <p class="font-serif italic text-base md:text-lg mb-10 opacity-80 px-4">Kami mengundang Anda untuk merayakan cinta kami.</p>
            <button onclick="openInvitation()" class="px-8 py-3 border border-white/50 rounded-full tracking-widest uppercase text-[10px] hover:bg-white hover:text-navy-deep transition-all">
                <i class="fa-solid fa-envelope-open mr-2"></i> Buka Undangan
            </button>
        </div>
    </div>

    <section class="relative h-screen flex items-center justify-center">
        <div class="absolute inset-0 parallax-hero" style="background-image: url('https://lh3.googleusercontent.com/d/1btA1WS_P0U-GSm6THHatwcmmXBrTk6LD'); filter: brightness(0.7);"></div>
        <div class="relative z-10 text-center text-white p-6" data-aos="zoom-out">
            <span class="uppercase tracking-[0.5em] text-[10px] md:text-xs mb-4 block">The Marriage Of</span>
            <h2 class="text-6xl md:text-9xl font-serif mb-6">Hedar & Puspita</h2>
            <p class="text-lg md:text-2xl font-serif italic tracking-widest">14 . 04 . 2026</p>
        </div>
    </section>

    <section class="py-20 md:py-32 px-6 bg-white text-center">
        <div class="max-w-2xl mx-auto" data-aos="fade-up">
            <p class="text-xl md:text-2xl font-serif italic leading-relaxed text-navy-deep/80 mb-8 px-2">
                "Dan di antara tanda-tanda (kebesaran)-Nya ialah Dia menciptakan pasangan-pasangan untukmu dari jenismu sendiri..."
            </p>
            <p class="uppercase tracking-widest text-[9px] font-semibold text-slate-gray">( Q.S : Ar-Ruum : 21 )</p>
        </div>
    </section>

    <section class="py-20 bg-[#F9FAFB]">
        <div class="max-w-6xl mx-auto px-6">
            <div class="grid md:grid-cols-2 gap-16 md:gap-24 text-center">
                <div data-aos="fade-up">
                    <div class="w-48 h-64 md:w-64 md:h-80 mx-auto mb-8 border border-navy-deep/10 p-2">
                        <img src="https://lh3.googleusercontent.com/d/1dVJAzYjH6jW5IaDbgKI6d60ZFbS6X0R9" class="w-full h-full object-cover grayscale" alt="Groom">
                    </div>
                    <h3 class="text-4xl md:text-5xl font-serif mb-4">Muhammad Hedar</h3>
                    <p class="text-sm text-slate-gray">Putra dari Bapak Ujang/Opik & Ibu Iyah</p>
                </div>
                <div data-aos="fade-up" data-aos-delay="200">
                    <div class="w-48 h-64 md:w-64 md:h-80 mx-auto mb-8 border border-navy-deep/10 p-2">
                        <img src="https://lh3.googleusercontent.com/d/1bD7DgNkf9kwpHI2U2_Fo-LYjlXiscKxO" class="w-full h-full object-cover grayscale" alt="Bride">
                    </div>
                    <h3 class="text-4xl md:text-5xl font-serif mb-4">Puspitasari Damayanti</h3>
                    <p class="text-sm text-slate-gray">Putri dari Bapak Udin Syamsudin & Ibu Yoyoh</p>
                </div>
            </div>
        </div>
    </section>

    <section class="py-20 bg-navy-deep text-black text-center">
        <div class="max-w-4xl mx-auto px-6">
            <h2 class="text-2xl md:text-4xl font-serif mb-12 tracking-widest">Menghitung Hari Bahagia</h2>
            <div class="grid grid-cols-4 gap-2 md:gap-4">
                <div class="bg-white/10 py-4 rounded-lg">
                    <p id="days" class="text-3xl md:text-6xl font-serif mb-1">00</p>
                    <p class="text-[8px] md:text-[10px] uppercase opacity-60">Hari</p>
                </div>
                <div class="bg-white/10 py-4 rounded-lg">
                    <p id="hours" class="text-3xl md:text-6xl font-serif mb-1">00</p>
                    <p class="text-[8px] md:text-[10px] uppercase opacity-60">Jam</p>
                </div>
                <div class="bg-white/10 py-4 rounded-lg">
                    <p id="minutes" class="text-3xl md:text-6xl font-serif mb-1">00</p>
                    <p class="text-[8px] md:text-[10px] uppercase opacity-60">Menit</p>
                </div>
                <div class="bg-white/10 py-4 rounded-lg">
                    <p id="seconds" class="text-3xl md:text-6xl font-serif mb-1">00</p>
                    <p class="text-[8px] md:text-[10px] uppercase opacity-60">Detik</p>
                </div>
            </div>
        </div>
    </section>

    <section class="py-20 bg-white">
        <div class="max-w-5xl mx-auto px-6">
            <div class="grid md:grid-cols-2 gap-8">
                <div class="p-8 md:p-12 border border-navy-deep/10 text-center" data-aos="fade-up">
                    <h3 class="text-2xl md:text-3xl font-serif mb-6 italic">Akad Nikah</h3>
                    <p class="text-sm mb-2 font-bold">Selasa, 14 April 2026</p>
                    <p class="text-xs text-slate-gray mb-6">07:00 WIB — Selesai</p>
                    <p class="text-[11px] leading-relaxed mb-8">Kp.cibucil RT 004/002 desa Sukamanah kecamatan Jonggol</p>
                    <a href="#" class="btn-minimal px-6 py-2 rounded-full text-[9px] uppercase tracking-widest inline-block">Maps</a>
                </div>
                <div class="p-8 md:p-12 border border-navy-deep/10 text-center" data-aos="fade-up">
                    <h3 class="text-2xl md:text-3xl font-serif mb-6 italic">Resepsi</h3>
                    <p class="text-sm mb-2 font-bold">Rabu, 04 Februari 2026</p>
                    <p class="text-xs text-slate-gray mb-6">07:00 WIB — Selesai</p>
                    <p class="text-[11px] leading-relaxed mb-8">Kp Ciledug RT/RW 001/005 desa bendungan kec Jonggol</p>
                    <a href="#" class="btn-minimal px-6 py-2 rounded-full text-[9px] uppercase tracking-widest inline-block">Maps</a>
                </div>
            </div>
        </div>
    </section>

    <section class="py-20 bg-[#F9FAFB]">
        <div class="max-w-4xl mx-auto px-6">
            <div class="grid lg:grid-cols-2 gap-16">
                <div class="glass-card p-8 rounded-xl shadow-sm">
                    <h3 class="text-2xl font-serif mb-8 text-center md:text-left">RSVP</h3>
                    <form id="rsvp-form" onsubmit="window.handleRSVP(event)" class="space-y-4">
                        <input type="text" id="rsvp-name" placeholder="Nama" class="w-full bg-white/50 border-b py-3 outline-none text-xs uppercase" required>
                        <select id="rsvp-guests" class="w-full bg-white/50 border-b py-3 outline-none text-xs uppercase">
                            <option value="1">1 Orang</option>
                            <option value="2">2 Orang</option>
                        </select>
                        <div class="flex gap-6 text-[10px] py-2">
                            <label><input type="radio" name="attend" value="Hadir" checked> Hadir</label>
                            <label><input type="radio" name="attend" value="Berhalangan"> Berhalangan</label>
                        </div>
                        <button type="submit" class="btn-navy w-full py-3 text-[10px] uppercase font-bold rounded-lg mt-4">Kirim</button>
                    </form>
                </div>

                <div class="flex flex-col">
                    <h3 class="text-2xl font-serif mb-8">Ucapan & Doa</h3>
                    <div id="wishes-list" class="flex-1 max-h-60 overflow-y-auto mb-6 pr-2 custom-scrollbar">
                        <p class="text-xs opacity-50">Memuat ucapan...</p>
                    </div>
                    <textarea id="wish-input" placeholder="Tulis ucapan..." class="w-full bg-white border p-4 h-24 text-xs mb-4 outline-none focus:ring-1 focus:ring-navy-deep/20 rounded-lg"></textarea>
                    <button onclick="window.sendWish()" class="btn-minimal w-full py-3 text-[10px] uppercase font-bold rounded-lg">Kirim Ucapan</button>
                </div>
            </div>
        </div>
    </section>

    <footer class="py-20 text-center bg-white">
        <h2 class="text-4xl font-serif mb-4">Hedar & Puspita</h2>
        <p class="text-[10px] uppercase tracking-widest text-slate-gray opacity-60 px-6 leading-loose">
            Terima kasih atas doa & kehadiran Anda.<br>Sampai jumpa di hari bahagia kami.
        </p>
    </footer>

    <div id="toast" class="fixed bottom-10 left-1/2 -translate-x-1/2 glass-card px-8 py-3 rounded-full text-[10px] text-navy-deep uppercase tracking-widest shadow-xl hidden z-[10000]"></div>

    <div id="music-container" class="fixed bottom-6 left-6 z-50 hidden">
        <button id="music-btn" onclick="toggleMusic()" class="w-10 h-10 md:w-12 md:h-12 bg-white rounded-full flex items-center justify-center text-navy-deep shadow-md border">
            <i class="fa-solid fa-compact-disc text-lg"></i>
        </button>
        <audio id="bg-music" loop>
            <source src="https://docs.google.com/uc?export=download&id=1W_46CsLEMRKIsl5WzbY4SalAfk3PnFPp" type="audio/mpeg">
        </audio>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
    <script>
        AOS.init({ duration: 1000, once: true });

        const targetDate = new Date("April 14, 2026 07:00:00").getTime();
        function updateCountdown() {
            const now = new Date().getTime();
            const diff = targetDate - now;
            if (diff < 0) return;
            document.getElementById('days').innerText = Math.floor(diff / (1000 * 60 * 60 * 24)).toString().padStart(2, '0');
            document.getElementById('hours').innerText = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)).toString().padStart(2, '0');
            document.getElementById('minutes').innerText = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60)).toString().padStart(2, '0');
            document.getElementById('seconds').innerText = Math.floor((diff % (1000 * 60)) / 1000).toString().padStart(2, '0');
        }
        setInterval(updateCountdown, 1000);
        updateCountdown();

        function openInvitation() {
            document.getElementById('cover').classList.add('hide');
            document.getElementById('music-container').classList.remove('hidden');
            document.getElementById('bg-music').play().catch(() => {});
            document.getElementById('music-btn').classList.add('playing');
        }

        function toggleMusic() {
            const audio = document.getElementById('bg-music');
            const btn = document.getElementById('music-btn');
            if (audio.paused) { audio.play(); btn.classList.add('playing'); }
            else { audio.pause(); btn.classList.remove('playing'); }
        }

        function showToast(msg) {
            const toast = document.getElementById('toast');
            toast.innerText = msg;
            toast.classList.remove('hidden');
            setTimeout(() => toast.classList.add('hidden'), 3000);
        }
    </script>
</body>
</html>
